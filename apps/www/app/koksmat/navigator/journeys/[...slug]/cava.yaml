journey: v1
metadata:
  app: cava
  name: Meeting
  description: |
    This is the recipie for running a meeting. Each "instance"
    of this recipie is called a ship, and what is keeping everybody
    onboard are the Koksmat's which do all of the trivial work of
    making nice food and drinks for the crew and the passengers.

waypoints:
  - port: Planning
    loads:
      containers:
        - container:
          name: prepare-meeting
          who:
            - organizer
              email
            - chair    
              email                 
          needs: 
            - meetingPurpose

          produces: 
            - agenda-suggestion
            - time-suggestion
            - place-suggestion
          script: |
            write-host "Prepared agenda"

        - container:
          name: pre-invitation
          who:
            - organizer   
          needs: 
            - attendees-proposed 
              email
              role       
            - time-suggestion
              day:number
              hour:number
              lengthInMinutes:number
            - place-suggestion
              site
              building
            - meetingPurpose      
            - agenda-suggestion
              title
              description
              durationInMinutes
              presenter
              attendees
          produces: 
            - time-agreed
            - place-agreed
            - agenda-agreed
            - attendees
          script: |
            write-host "Aggreed on time,place and agenda"    
  
        - container:
          name: prepare-meeting
          who:
            - organizer
            - chair            
          needs: 
            - attendee-list
            - time-agreed
            - place-agreed
            - agenda-agreed
          produces: 
            - agenda
            - time
            - place
          script: |
            write-host "Agenda approved"                     
      
        - container:
          name: prepare-invitation
          who:
            - organizer
            - chair            
          needs: 
            - attendees
            - agenda
            - time
            - place
          produces: 
            - resources-requirements
          script: |
            write-host "Resources being booked" 
      
        - container:
          name: resource-booking
          who:
            - organizer
            - resourceowner            
          needs: 
            - resources-suggestion
            - time
            - place
          produces: 
            - resources-booking
          script: |
            write-host "Resources being booked"                                   
        
        - container::
          name: send-invitation
          who:
            - organizer        
          needs: 
            - resource-requirements            
            - resource-booking            
            - organizer
            - attendees
            - agenda
            - time
            - place
          produces: 
            - invitation
          script: |
            write-host "Invitation send"     
          
shipyards: # Facility Management and HR
  description: |
      The shipyard is responsible for making sure that the ships
      are in good shape and that the crew is well trained and
      well rested. The shipyard is also responsible for making
      sure that the ships are properly equipped for the journey
      ahead.
  facility:
    -description: |
        The facility is responsible for making sure that the
        ships are in good shape.
  human: | 
      The human is responsible for making sure that the crew
      is well trained and well rested.




kitchens: 
    description: |
      The kitchen is responsible for making sure that the dishes is
      prepared and served at the right time. The kitchen is also
      responsible for making sure that the dishes is of the right
      quality and that the dished is served in a nice way.
    stations:
      templates:
        values: &ticket
          - creator: 
            - name: string
            - email : string
            - phone : string
          - created: datetime
          - title: string
          - description: multilinestring
          - modified: datetime
          - modifiedbu: 
            - name: string
            - email : string
            - phone : string
          - id : string
          - version: number
      pantry: 
        tickets:

          prepare-meeting: *ticket

          pre-invitation: *ticket
    
          approve-agenda: *ticket

          prepare-invitation: *ticket

          resource-booking: *ticket

          send-invitation: *ticket
